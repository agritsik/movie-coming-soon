#!/usr/bin/env node

"use strict";

const app = require('src/app');
const mongo = require('src/boundary/db/mongo_client');
const redis = require('src/boundary/cache/redis_client');
const debug = require('debug')('csm:server');
const http = require('http');

const port = process.env.PORT || '3000';
app.set('port', port);
const server = http.createServer(app);

// start server
Promise
    .all([mongo.init(), redis.init()])
    .then(() => server.listen(port));

server.on('listening', () => console.log("Microservice is up and running"));



